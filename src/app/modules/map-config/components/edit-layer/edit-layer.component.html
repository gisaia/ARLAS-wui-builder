<!-- TODO move this, its place is misleading -->


<form [formGroup]="layerFormGroup" (submit)="submit()" #f="ngForm">
    <app-config-element>
        <div content>
            <mat-form-field>
                <mat-label>Name</mat-label>
                <input matInput placeholder="name" formControlName="name">
            </mat-form-field>
        </div>
        <div description>
            Name of the layer. Only used for visualization.
        </div>
    </app-config-element>

    <app-config-element>
        <div content>
            <mat-form-field>
                <mat-label>Mode</mat-label>
                <mat-select formControlName="mode" appAlertOnChange="changing the mode will reset the below form">
                    <mat-option value="features">Features</mat-option>
                    <mat-option value="cluster">Cluster</mat-option>
                    <mat-option value="feature-metric">Feature Metric</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div description>
            Mode of the layer.
        </div>
    </app-config-element>

    <div *ngIf="layerFormGroup.value.mode == 'features'">
        <app-edit-layer-features formControlName="modeFormGroup" [submit]="submitSubject.asObservable()">
        </app-edit-layer-features>
    </div>

    <button mat-raised-button color="primary" type="submit">Save layer</button>
    <button class="cancel-button" mat-raised-button (click)="forceCanExit = true"
    [routerLink]="['', 'map-config', 'layers']">Cancel</button>
</form>