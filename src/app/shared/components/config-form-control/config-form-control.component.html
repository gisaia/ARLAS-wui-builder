<div *ngIf="isSlideToggle(); let typedControl">
    <mat-slide-toggle [formControl]="typedControl" labelPosition="before"
        [appResetOnChange]="typedControl.resetDependantsOnChange && typedControl.dependantControls ? defaultKey : null"
        [dependants]="typedControl.resetDependantsOnChange && typedControl.dependantControls ? typedControl.dependantControls : null">
        {{ typedControl.label | translate}}
    </mat-slide-toggle>
    {{ typedControl.labelAfter | translate}}
</div>

<div *ngIf="isSlider(); let typedControl">
    <mat-label [class.control-error]="typedControl.touched && typedControl.invalid">{{ typedControl.label | translate}}
        {{typedControl.optional ? '' : '*'}}</mat-label>
    <mat-slider thumbLabel [formControl]="typedControl" [min]="typedControl.min" [max]="typedControl.max"
        [step]="typedControl.step" (input)="typedControl.ensureLessThan ? typedControl.checkLessThan($event.value) : null;
        typedControl.ensureGeaterThan ? typedControl.checkGreaterThan($event.value) : null">
    </mat-slider>
</div>

<div *ngIf="isSelect(); let typedControl">
    <mat-form-field>
        <mat-label>{{ typedControl.label | translate}}</mat-label>
        <mat-select [formControl]="typedControl" [required]="!typedControl.optional"
            [appAlertOnChange]="typedControl.resetDependantsOnChange && typedControl.dependantControls ? 'Warning, changing this field\'s value will reset some other fields' : null"
            [appResetOnChange]="typedControl.resetDependantsOnChange && typedControl.dependantControls ? defaultKey : null"
            [dependants]="typedControl.resetDependantsOnChange && typedControl.dependantControls ? typedControl.dependantControls : null">
            <mat-option *ngIf="typedControl.optional"></mat-option>
            <mat-option *ngFor="let opt of typedControl.syncOptions" [value]="opt.value">
                {{opt.label | translate}}
            </mat-option>
        </mat-select>
    </mat-form-field>
</div>

<div *ngIf="isHuePalette(); let typedControl" class="control-hue-palette">
    <mat-form-field>
        <mat-label>{{ typedControl.label | translate}}</mat-label>
        <mat-select [formControl]="typedControl" [required]="!typedControl.optional"
            [ngStyle]="{'backgroundImage': typedControl.value ? 'linear-gradient(to left, ' + typedControl.getCurrentOption().label + ')' : null}">
            <mat-option *ngIf="typedControl.optional"></mat-option>
            <mat-option *ngFor="let opt of typedControl.syncOptions" [value]="opt.value"
                [ngStyle]="{'backgroundImage': 'linear-gradient(to left, ' + opt.label + ')'}">
            </mat-option>
        </mat-select>
    </mat-form-field>
</div>

<div *ngIf="isAutocomplete(); let typedControl">
    <mat-form-field>
        <mat-label>{{ typedControl.label | translate}}</mat-label>
        <input type="text" matInput [formControl]="typedControl" [matAutocomplete]="auto" #autocompleteInput
            [required]="!typedControl.optional" 
            [appAlertOnChange]="typedControl.resetDependantsOnChange && typedControl.dependantControls ? 'Warning, changing this field\'s value will reset some other fields' : null"
            [appResetOnChange]="typedControl.resetDependantsOnChange && typedControl.dependantControls ? defaultKey : null"
            [dependants]="typedControl.resetDependantsOnChange && typedControl.dependantControls ? typedControl.dependantControls : null">
        <button mat-button *ngIf="typedControl.value" matSuffix mat-icon-button (click)="autocompleteInput.value = ''">
            <mat-icon>close</mat-icon>
        </button>
        <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
            <mat-option *ngIf="typedControl.optional"></mat-option>
            <mat-option *ngFor="let opt of typedControl.filteredOptions" [value]="opt.value">
                {{opt.label}}
            </mat-option>
        </mat-autocomplete>
    </mat-form-field>
</div>

<div *ngIf="isInput(); let typedControl">
    <mat-form-field>
        <mat-label>{{ typedControl.label | translate}}</mat-label>
        <input matInput [formControl]="typedControl" [type]="typedControl.inputType"
            [required]="!typedControl.optional">
    </mat-form-field>
</div>

<div *ngIf="isIcon(); let typedControl" class="icon-form-control">
    <mat-form-field>
        <mat-label>{{ typedControl.label | translate}}</mat-label>
        <input matInput [formControl]="typedControl" type="text" [required]="!typedControl.optional">
    </mat-form-field>
    <mat-icon>{{ typedControl.value }}</mat-icon>
</div>

<div *ngIf="isColor(); let typedControl">
    <div [class.control-error]="typedControl.touched && typedControl.invalid">
        {{ typedControl.label | translate}} {{typedControl.optional ? '' : '*'}}</div>
    <app-color-picker-wrapper [value]="typedControl.value" (setValue)="typedControl.setValue($event)">
    </app-color-picker-wrapper>
</div>

<div *ngIf="isHidden(); let typedControl">
    <input [formControl]="typedControl" type="hidden" [required]="!typedControl.optional">
</div>

<div *ngIf="isButton(); let typedControl">
    <button type="button" mat-raised-button color="primary" (click)="typedControl.callback(typedControl)">
        {{typedControl.label | translate}}
    </button>
</div>